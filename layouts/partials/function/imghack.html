{{- $resource := 0 -}}
{{- $url := urls.Parse .Path -}}
    {{- if not $url.Host | and $url.Path | and (strings.HasSuffix $url.Path "/" | not) -}}
        {{- if .Resources -}}
            {{- with resources.GetMatch $url.Path -}}
                {{- $resource = . -}}
            {{- end -}}
        {{- else -}}
            {{- with resources.Get $url.Path -}}
                {{- $resource = . -}}
            {{- end -}}
        {{- end -}}
    {{- else -}}
        {{ with $img := resources.GetRemote .Path }}
            {{ with .Err }}
                {{ warnf "%#v" . }}
            {{ else }}
                {{- $reimg := $img -}}
                {{- $resource = $reimg -}}
            {{ end }}
        {{- end -}}
    {{- end -}}
{{- return $resource -}}